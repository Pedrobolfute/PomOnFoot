Date.prototype.getWeek=function(){let e=new Date(this.getFullYear(),0,1),t;return Math.ceil((new Date(this.getFullYear(),this.getMonth(),this.getDate())-e+864e5)/864e5/7)};class DataStorage{constructor(e,t){this.element=e,this.value=t}allWeek={0:"Domingo",1:"Segunda",2:"Ter\xe7a",3:"Quarta",4:"Quinta",5:"Sexta",6:"Sabado",7:"Ontem"};getWeek(){let e=new Date;return e.getWeek()}getDay(){let e=new Date;return e.getDay()}whichTodoDay(){let e=new Date().getDay(),t=e+1,s=e-1;if(t>6&&(t=0),s<0&&(s=6),this.element){let a=this.element.textContent.toLowerCase();if("hoje"===a)return e;if("amanh\xe3"===a)return t;if("ontem"===a)return s}}removePast(){for(let e=0;e<=this.getWeek();e++)for(let t=0;t<=6;t++)e<=this.getWeek()-2?localStorage.hasOwnProperty(`${e}-${this.allWeek[t]}`)&&localStorage.removeItem(`${e}-${this.allWeek[t]}`):e===this.getWeek()&&0===t?localStorage.hasOwnProperty(`${e-1}-${this.allWeek[5]}`)&&localStorage.removeItem(`${e-1}-${this.allWeek[5]}`):e===this.getWeek()&&1===t?localStorage.hasOwnProperty(`${e-1}-${this.allWeek[6]}`)&&localStorage.removeItem(`${e-1}-${this.allWeek[6]}`):e===this.getWeek()&&0!=t&&1!=t&&t<=this.getDay()&&localStorage.hasOwnProperty(`${e}-${this.allWeek[t]}`)&&localStorage.removeItem(`${e}-${this.allWeek[t-2]}`)}setTodoData(e){let t=[],s="amanh\xe3"===this.element.textContent.toLowerCase(),a=6===this.getDay(),i;i=s&&a?this.getWeek()+1:this.getWeek(),localStorage.hasOwnProperty(`${i}-${this.allWeek[this.whichTodoDay()]}`)&&(t=JSON.parse(localStorage.getItem(`${i}-${this.allWeek[this.whichTodoDay()]}`))),t.push({task:e,week:i,weekDay:this.whichTodoDay()}),localStorage.setItem(`${i}-${this.allWeek[this.whichTodoDay()]}`,JSON.stringify(t))}loadLastTodoData(e){if(localStorage.hasOwnProperty(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`)){let t=JSON.parse(localStorage.getItem(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`)),s=t[t.length-1].task,a=`
      <div class="formItem">
        <input type="checkbox" class="taskList" name="${s}" id="${s}">
        <label for="${s}">${s}</label>
      </div>
      `;e.innerHTML+=a}}getTodoData(e){let t;localStorage.hasOwnProperty(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`)&&(6===this.getWeek()&&localStorage.hasOwnProperty(`${this.getWeek()+1}-${this.allWeek[0]}`)&&(t=JSON.parse(localStorage.getItem(`${this.getWeek()+1}-${this.allWeek[this.whichTodoDay()]}`))),(t=JSON.parse(localStorage.getItem(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`))).forEach(t=>{let s=`
        <div class="formItem">
          <input type="checkbox" class="taskList" name="${t.task}" id="${t.task}">
          <label for="${t.task}">${t.task}</label>
        </div>
        `;e.innerHTML+=s}))}removeTodoData(e){if(e){let t=e.getAttribute("name");if(localStorage.hasOwnProperty(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`)){let s=JSON.parse(localStorage.getItem(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`));s=s.filter(e=>e.task!==`${t}`),localStorage.setItem(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`,JSON.stringify(s))}}}cleanTodoData(e){e.innerHTML=""}cleanWeekData(e){for(let t=0;t<e.length;t++)e[t].textContent=""}getWeekData(){let e=[],t;for(let s=0;s<=6;s++){s>=this.getDay()&&(t=s);let a=document.querySelectorAll(`tr td:nth-child(${s+1})`);(localStorage.hasOwnProperty(`${this.getWeek()}-${this.allWeek[t]}`)||localStorage.hasOwnProperty(`${this.getWeek()+1}-${this.allWeek[s]}`))&&(e=JSON.parse(localStorage.getItem(`${this.getWeek()}-${this.allWeek[t]}`)||localStorage.getItem(`${this.getWeek()+1}-${this.allWeek[s]}`))).map((e,t)=>{a[t].textContent=e.task})}}setWeekData(e,t,s){let a;a=this.getDay()<=s-1?this.getWeek():this.getWeek()+1;let i=e.value;if(""!==i.trim()&&""==t.trim()){let h=[];localStorage.hasOwnProperty(`${a}-${this.allWeek[s-1]}`)&&(h=JSON.parse(localStorage.getItem(`${a}-${this.allWeek[s-1]}`))),h.push({task:i,week:a,weekDay:s-1}),localStorage.setItem(`${a}-${this.allWeek[s-1]}`,JSON.stringify(h))}else if(""==i.trim()&&""!==t.trim()){let l=JSON.parse(localStorage.getItem(`${a}-${this.allWeek[s-1]}`));l=l.filter(e=>e.task!==t),localStorage.setItem(`${a}-${this.allWeek[s-1]}`,JSON.stringify(l))}else if(t.trim()==i.trim())console.log("...");else{let r=[],o=JSON.parse(localStorage.getItem(`${a}-${this.allWeek[s-1]}`));(r=o=o.filter(e=>e.task!==t)).push({task:i,week:a,weekDay:s-1}),localStorage.setItem(`${a}-${this.allWeek[s-1]}`,JSON.stringify(r))}}}