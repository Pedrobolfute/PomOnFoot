Date.prototype.getWeek=function(){let e=new Date(this.getFullYear(),0,1);return Math.ceil((new Date(this.getFullYear(),this.getMonth(),this.getDate())-e+864e5)/864e5/7)};class DataStorage{constructor(e,t){this.element=e,this.value=t}allWeek={0:"Domingo",1:"Segunda",2:"Ter\xe7a",3:"Quarta",4:"Quinta",5:"Sexta",6:"Sabado",7:"Ontem"};getWeek(){return(new Date).getWeek()}getDay(){return(new Date).getDay()}whichTodoDay(){let e=new Date().getDay(),t=e+1,a=e-1;if(t>6&&(t=0),a<0&&(a=6),this.element){let s=this.element.textContent.toLowerCase();if("hoje"===s)return e;if("amanh\xe3"===s)return t;if("ontem"===s)return a}}removePast(){for(let e=0;e<=this.getWeek();e++)for(let t=0;t<=6;t++)e<=this.getWeek()-2?localStorage.hasOwnProperty(`${e}-${this.allWeek[t]}`)&&localStorage.removeItem(`${e}-${this.allWeek[t]}`):e===this.getWeek()&&0===t?localStorage.hasOwnProperty(`${e-1}-${this.allWeek[5]}`)&&localStorage.removeItem(`${e-1}-${this.allWeek[5]}`):e===this.getWeek()&&1===t?localStorage.hasOwnProperty(`${e-1}-${this.allWeek[6]}`)&&localStorage.removeItem(`${e-1}-${this.allWeek[6]}`):e===this.getWeek()&&0!=t&&1!=t&&t<=this.getDay()&&localStorage.hasOwnProperty(`${e}-${this.allWeek[t]}`)&&localStorage.removeItem(`${e}-${this.allWeek[t-2]}`)}setTodoData(e){let t=[],a="amanh\xe3"===this.element.textContent.toLowerCase(),s=6===this.getDay(),i;i=a&&s?this.getWeek()+1:this.getWeek(),localStorage.hasOwnProperty(`${i}-${this.allWeek[this.whichTodoDay()]}`)&&(t=JSON.parse(localStorage.getItem(`${i}-${this.allWeek[this.whichTodoDay()]}`))),t.push({task:e,week:i,weekDay:this.whichTodoDay()}),localStorage.setItem(`${i}-${this.allWeek[this.whichTodoDay()]}`,JSON.stringify(t))}loadLastTodoData(e){let t="amanh\xe3"===this.element.textContent.toLowerCase(),a=6===this.getDay(),s;if(s=t&&a?this.getWeek()+1:this.getWeek(),localStorage.hasOwnProperty(`${s}-${this.allWeek[this.whichTodoDay()]}`)){let i=JSON.parse(localStorage.getItem(`${s}-${this.allWeek[this.whichTodoDay()]}`)),h=i[i.length-1].task,l=`
      <div class="formItem">
        <input type="checkbox" class="taskList" name="${h}" id="${h}">
        <label for="${h}">${h}</label>
      </div>
      `;e.innerHTML+=l}}getTodoData(e){let t;6===this.getDay()&&0===this.whichTodoDay()?localStorage.hasOwnProperty(`${this.getWeek()+1}-${this.allWeek[0]}`)&&(t=JSON.parse(localStorage.getItem(`${this.getWeek()+1}-${this.allWeek[this.whichTodoDay()]}`))).forEach(t=>{let a=`
          <div class="formItem">
          <input type="checkbox" class="taskList" name="${t.task}" id="${t.task}">
          <label for="${t.task}">${t.task}</label>
          </div>
          `;e.innerHTML+=a}):0===this.getDay()&&6===this.whichTodoDay()?localStorage.hasOwnProperty(`${this.getWeek()-1}-${this.allWeek[6]}`)&&(t=JSON.parse(localStorage.getItem(`${this.getWeek()-1}-${this.allWeek[this.whichTodoDay()]}`))).forEach(t=>{let a=`
            <div class="formItem">
            <input type="checkbox" class="taskList" name="${t.task}" id="${t.task}">
            <label for="${t.task}">${t.task}</label>
            </div>
            `;e.innerHTML+=a}):localStorage.hasOwnProperty(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`)&&(t=JSON.parse(localStorage.getItem(`${this.getWeek()}-${this.allWeek[this.whichTodoDay()]}`))).forEach(t=>{let a=`
          <div class="formItem">
          <input type="checkbox" class="taskList" name="${t.task}" id="${t.task}">
          <label for="${t.task}">${t.task}</label>
          </div>
          `;e.innerHTML+=a})}removeTodoData(e){let t="amanh\xe3"===this.element.textContent.toLowerCase(),a=6===this.getDay(),s;if(s=t&&a?this.getWeek()+1:this.getWeek(),e){let i=e.getAttribute("name");if(localStorage.hasOwnProperty(`${s}-${this.allWeek[this.whichTodoDay()]}`)){let h=JSON.parse(localStorage.getItem(`${s}-${this.allWeek[this.whichTodoDay()]}`));h=h.filter(e=>e.task!==`${i}`),localStorage.setItem(`${s}-${this.allWeek[this.whichTodoDay()]}`,JSON.stringify(h))}}}cleanTodoData(e){e.innerHTML=""}cleanWeekData(e){for(let t=0;t<e.length;t++)e[t].textContent=""}getWeekData(){let e=[],t;for(let a=0;a<=6;a++){a>=this.getDay()&&(t=a);let s=document.querySelectorAll(`tr td:nth-child(${a+1})`);(localStorage.hasOwnProperty(`${this.getWeek()}-${this.allWeek[t]}`)||localStorage.hasOwnProperty(`${this.getWeek()+1}-${this.allWeek[a]}`))&&(e=JSON.parse(localStorage.getItem(`${this.getWeek()}-${this.allWeek[t]}`)||localStorage.getItem(`${this.getWeek()+1}-${this.allWeek[a]}`))).map((e,t)=>{s[t].textContent=e.task})}}setWeekData(e,t,a){let s;s=this.getDay()<=a-1?this.getWeek():this.getWeek()+1;let i=e.value;if(""!==i.trim()&&""==t.trim()){let h=[];localStorage.hasOwnProperty(`${s}-${this.allWeek[a-1]}`)&&(h=JSON.parse(localStorage.getItem(`${s}-${this.allWeek[a-1]}`))),h.push({task:i,week:s,weekDay:a-1}),localStorage.setItem(`${s}-${this.allWeek[a-1]}`,JSON.stringify(h))}else if(""==i.trim()&&""!==t.trim()){let l=JSON.parse(localStorage.getItem(`${s}-${this.allWeek[a-1]}`));l=l.filter(e=>e.task!==t),localStorage.setItem(`${s}-${this.allWeek[a-1]}`,JSON.stringify(l))}else if(t.trim()==i.trim())console.log("...");else{let o=[],r=JSON.parse(localStorage.getItem(`${s}-${this.allWeek[a-1]}`));(o=r=r.filter(e=>e.task!==t)).push({task:i,week:s,weekDay:a-1}),localStorage.setItem(`${s}-${this.allWeek[a-1]}`,JSON.stringify(o))}}}